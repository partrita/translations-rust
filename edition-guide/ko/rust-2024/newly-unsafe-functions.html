<!DOCTYPE HTML>
<html lang="ko" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>새로 안전하지 않은 함수 - The Rust Edition Guide</title>


        <!-- Custom HTML head -->

        <script async src="https://www.googletagmanager.com/gtag/js?id=G-L455DH98TK"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'G-L455DH98TK');
        </script>
        
        
        <script>
            (function () {
                // See these pages for details:
                // https://developers.google.com/search/docs/crawling-indexing/consolidate-duplicate-urls
                // https://developers.google.com/search/docs/crawling-indexing/javascript/javascript-seo-basics
        
                function gen_canonical_href(lang) {
        
                    let base = "https://rust-lang-translations.org/edition-guide";
        
                    let canonical_href;
                    if (lang == "en") {
                        canonical_href = `${base}/rust-2024/newly-unsafe-functions.md`;
                    } else {
                        canonical_href = `${base}/${lang}/rust-2024/newly-unsafe-functions.md`;
                    }
                    canonical_href = canonical_href.slice(0, -"md".length) + "html";
                    if (canonical_href.endsWith("/index.html")) {
                        canonical_href = canonical_href.slice(0, -"index.html".length);
                    }
                    return canonical_href;
                }
        
                const canonical_href = gen_canonical_href("ko");

                let link = document.createElement("link");
                link.rel = "canonical";
                link.href = canonical_href;
                document.head.appendChild(link);
        
        
                const langs = ["en"  , "ko" ];
        
                for (const lang of langs) {
                    const canonical_href = gen_canonical_href(lang);
        
                    let link = document.createElement("link");
                    link.rel = "alternate";
                    link.hreflang = lang;
                    link.href = canonical_href;
                    document.head.appendChild(link);
                }
            })()
        </script>
        

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/language-picker.css">


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust Edition Guide</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-lang-translations/project" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/rust-lang/edition-guide/edit/master/src/rust-2024/newly-unsafe-functions.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="unsafe-함수"><a class="header" href="#unsafe-함수">Unsafe 함수</a></h1>
<h2 id="요약"><a class="header" href="#요약">요약</a></h2>
<ul>
<li>다음 함수들은 이제 <a href="../../reference/unsafe-keyword.html#unsafe-functions-unsafe-fn"><code>unsafe</code></a>로 표시됩니다:
<ul>
<li><a href="../../std/env/fn.set_var.html"><code>std::env::set_var</code></a></li>
<li><a href="../../std/env/fn.remove_var.html"><code>std::env::remove_var</code></a></li>
<li><a href="../../std/os/unix/process/trait.CommandExt.html#method.before_exec"><code>std::os::unix::process::CommandExt::before_exec</code></a></li>
</ul>
</li>
</ul>
<h2 id="세부-정보"><a class="header" href="#세부-정보">세부 정보</a></h2>
<p>시간이 지남에 따라 표준 라이브러리의 특정 함수들은 <code>unsafe</code>로 표시되었어야 함이 분명해졌습니다. 하지만 함수에 <code>unsafe</code>를 추가하는 것은 기존 코드를 <code>unsafe</code> 블록 안에 넣어야 하기 때문에 호환성을 깨는 변경이 될 수 있습니다. 이러한 호환성 문제를 피하기 위해, 이 함수들은 이전 에디션에서는 <code>unsafe</code>를 요구하지 않지만, 2024 에디션부터는 <code>unsafe</code>로 표시됩니다.</p>
<h3 id="stdenvset_var-remove_var"><a class="header" href="#stdenvset_var-remove_var"><code>std::env::{set_var, remove_var}</code></a></h3>
<p>It can be unsound to call <a href="../../std/env/fn.set_var.html"><code>std::env::set_var</code></a> or <a href="../../std/env/fn.remove_var.html"><code>std::env::remove_var</code></a> in a multithreaded program due to safety limitations of the way the process environment is handled on some platforms. The standard library originally defined these as safe functions, but it was later determined that was not correct.</p>
<p>다른 스레드가 실행 중일 때는 이 함수들이 호출되지 않도록 하는 것이 중요합니다. 더 자세한 내용은 해당 함수 문서의 <a href="../../std/env/fn.set_var.html#safety">Safety</a> 섹션을 참조하세요.</p>
<h3 id="stdosunixprocesscommandextbefore_exec"><a class="header" href="#stdosunixprocesscommandextbefore_exec"><code>std::os::unix::process::CommandExt::before_exec</code></a></h3>
<p><a href="../../std/os/unix/process/trait.CommandExt.html#method.before_exec"><code>std::os::unix::process::CommandExt::before_exec</code></a> 함수는 <code>exec</code> 호출 전에 클로저를 실행하는 방법을 제공하는 유닉스 전용 함수입니다. 이 함수는 1.37 릴리스에서 사용 중단(deprecated)되었으며, 동일한 작업을 수행하지만 <code>unsafe</code>로 표시된 <a href="../../std/os/unix/process/trait.CommandExt.html#tymethod.pre_exec"><code>pre_exec</code></a>로 대체되었습니다.</p>
<p><code>before_exec</code>이 사용 중단되었음에도 불구하고, 2024 에디션부터는 <code>unsafe</code>로 올바르게 표시됩니다. 이는 아직 <code>pre_exec</code>으로 마이그레이션하지 않은 레거시 코드가 <code>unsafe</code> 블록을 필요로 하도록 보장하는 데 도움이 될 것입니다.</p>
<p><code>before_exec</code> 클로저가 충족해야 하는 매우 엄격한 안전 요구 사항이 있습니다. 자세한 내용은 <a href="../../std/os/unix/process/trait.CommandExt.html#notes-and-safety">Safety 섹션</a>을 참조하세요.</p>
<h2 id="마이그레이션"><a class="header" href="#마이그레이션">마이그레이션</a></h2>
<p>코드가 2021 에디션과 2024 에디션 모두에서 컴파일되게 하려면, 이 함수들이 <code>unsafe</code> 블록 내에서만 호출되도록 해야 합니다.</p>
<p><strong>⚠ 주의</strong>: 이 함수들에 대한 호출을 수동으로 검사하고, 해당 함수의 전제 조건을 충족하도록 코드를 다시 작성하는 것이 중요합니다. 특히, 여러 스레드가 실행 중일 수 있는 경우 <code>set_var</code>와 <code>remove_var</code>를 호출해서는 안 됩니다. 사용 사례를 관리하기 위해 환경 변수 이외의 다른 메커니즘을 사용하도록 선택해야 할 수도 있습니다.</p>
<p><a href="../../rustc/lints/listing/allowed-by-default.html#deprecated-safe-2024"><code>deprecated_safe_2024</code></a> 린트는 두 에디션 모두에서 컴파일될 수 있도록, 이러한 함수 사용을 <code>unsafe</code> 블록으로 자동으로 감싸서 수정합니다. 이 린트는 <code>rust-2024-compatibility</code> 린트 그룹의 일부이며, <code>cargo fix --edition</code>을 실행할 때 자동으로 적용됩니다. 코드를 Rust 2024 에디션과 호환되도록 마이그레이션하려면 다음을 실행하세요:</p>
<pre><code class="language-sh">cargo fix --edition
</code></pre>
<p>예를 들어, 이것은 다음과 같이 변경됩니다:</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    std::env::set_var("FOO", "123");
}</code></pre></pre>
<p>변경 후:</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    // TODO: 환경 변수 접근이 단일 스레드 코드에서만 발생하는지 감사(Audit)해야 합니다.
    unsafe { std::env::set_var("FOO", "123") };
}</code></pre></pre>
<p>단, 이 자동 마이그레이션은 이 함수들이 올바르게 사용되고 있는지 검증할 수 없다는 점에 유의하세요. 사용법을 수동으로 검토하는 것은 여전히 여러분의 책임입니다.</p>
<p>또는, 이 함수들이 호출되는 곳을 찾기 위해 수동으로 린트를 활성화할 수 있습니다:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// 수동 마이그레이션을 수행하려면 크레이트 루트에 이것을 추가하세요.
#![warn(deprecated_safe_2024)]
<span class="boring">}</span></code></pre></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../rust-2024/intoiterator-box-slice.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../rust-2024/cargo.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../rust-2024/intoiterator-box-slice.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../rust-2024/cargo.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../theme/language-picker.js"></script>


    </div>
    </body>
</html>
